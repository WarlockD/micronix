.he "setbuf (3s)                  3/24/82                  setbuf (3s)"
.fo "                               -#-"
.in 5
.rm 65
.bd
SUBROUTINE(S)
.in +5
.br
.bd
setbuf
- assign buffering to a stream
.sp 2
.in -5
.bd
C
.in +5
.br
.bd
#include <stdio.h>
.sp
.bd 3
setbuf(stream, buf)
.br
FILE *stream;
.br
char *buf;
.sp 2
.in -5
FUNCTION
.in +5
.br
.bd
Setbuf
is used after a stream is opened, but before it is read or written to
cause the
.bd
buf
character array to be used instead of an automatically allocated buffer.

If
.bd
buf
is NULL (constant pointer), I/O is completely unbuffered.

Size of array is determined by a the constant, BUFSIZ.  An example:
.sp
.ce
.bd
char buf[BUFSIZ];
.sp
A buffer is obtained from
.bd
alloc
(3) upon the first 
.bd
getc
or
.bd
putc
on the file.  One exception is when the standard output is directed
to a terminal, in which case it is line buffered.  Normally, output
streams directed to terminals and
.bd
stderr
(standard error stream) are not buffered. 

When standard output is line buffered, it is flushed by
.bd
read
(2) each time data is read from the standard input.
.sp 2
.in -5
.bd
ERRORS
.in +5
.br
By default, the standard error stream should be line buffered.
.sp 2
.in -5
.bd
ALSO READ
.in +5
.br
fopen (3), getc (3), putc (3), alloc (3)
